@inject Services.IActionLoader Actions;
@inject Services.ISettingsLoader sl;

@code{
    [Parameter] public Action Return { get; set; } = (() => { });
    [Parameter] public State.Land? Land { get; set; }
    [Parameter] public State.Player? Player { get; set; }
    int Recruited { get; set; }
    protected override void OnInitialized()
    {
        Recruited = (int)Player!.Money;
    }
    void DoRecruit()
    {
        var recruitment = new Dynamics.Commands.Recruitment(Player!.Id, Land!.Id, new State.PlayerArmy(sl.Settings, Player!, (uint)Recruited));
        if (Actions.Add(recruitment))
        {
            Return();
        }
    }
}
@if (Player!.Money == 0)
{
    Return();
}
@if (Recruited > Player!.Money)
{
    <p>Máš jen <Money>@Player!.Money</Money></p>
}
<label>
    @Land!.Name má @Land!.Soldiers vojáků. Kolik chcete naverbovat?<br />
    <input @onsubmit="DoRecruit" @bind-value="Recruited" @bind-value:event="oninput" min="1" autofocus /><br />
</label>
<button @onclick="DoRecruit">Verbovat</button>